from math import ceil
import random
import os
import sys


if (len(sys.argv) < 2 or (sys.argv[1] == "")):
    distance = 20
else:
    value = float(sys.argv[1])
    distance = ceil((value + 0.1) / 0.05) + 3
    # float(sys.argv[1]) * 100 / 2

filename = os.path.basename(__file__)

xml_elements = ""
for j in range(int(distance)):
    y = (j * 0.05)-.2
    for i in range(40):
        r, g, b = random.random(), random.random(), random.random()
        xml_elements += f'<geom type="box" size=".025 .025 .025" pos="{(i*.05)-.95} {y} -.2" rgba="{r} {g} {b} 1" />\n'

xml_file = f'''
<!-- This file was generated by build_floor.py -->
<!-- It is not recommended to edit this file -->
<mujoco>
    <default>
        <geom density="100" friction=".5" rgba="1 .6 .8 1" />
    </default>
    <worldbody>
        {xml_elements}
    </worldbody>
</mujoco>
'''

# Save the XML file
with open('model/ground/floor.xml', 'w') as f:
    f.write(xml_file)

print(f'Complete. ({filename})')
